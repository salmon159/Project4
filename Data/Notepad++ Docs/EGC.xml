Sample Orders
USA0115972
created -> release -> ready for backroom pick  
giftcard generation
-> Invoiced
-> Shipped
-> 


InvoiceShipment
<ManageXmlList>
    <ManageXml Action="Manage" AttributeName="BaseDropStatus"
        AttributeValue="1300.100" Xpath="/Shipment"/>
    <ManageXml Action="Manage" AttributeName="TransactionId"
        AttributeValue="TITAN_EGC_INVOICE.0001.ex" Xpath="/Shipment"/>
</ManageXmlList>

Deliver
<ManageXmlList>
    <ManageXml Action="Manage" AttributeName="BaseDropStatus"
        AttributeValue="1500" Xpath="/Shipment"/>
    <ManageXml Action="Manage" AttributeName="TransactionId"
        AttributeValue="TITAN_EGC_INVOICE.0001.ex" Xpath="/Shipment"/>
</ManageXmlList>
<Shipment ShipNode="XNJ" ShipmentNo="100008846" StatusCode="13" OrderNo="USA0115759" SellerOrganizationCode="TITAN_US"/>


<Shipment ShipNode="XNJ" ShipmentNo="100008846" StatusCode="13" OrderNo="USA0115759" SellerOrganizationCode="TITAN_US"/>



###################################################################################################################################
###################################################################################################################################
###################################################################################################################################

Gift Card New Approach

condition on = New Node - Item ID/Item type (infinite in console).


shipment created -> queue for accepted and not to be sent to POS (IBD_ChangeShipment add condition to not send also no Email to store).

accepted -> queue for packed.
on packed 
invoice & Capture (sent order details to Oracle- on response store the Oracle Invoice number).
-> queue to generate GC system and put to invoice queue (no AWB call).
Invoice pdf email sent to customer to be confirmed.
 ->  shipped and delivered queue (send email to customer CampaignID="<To get from SFMC/>").

Customer Emails only 2 Emails:
Order created. 
GiftCard generated (URL and URL Pin - delivered).


To create a Exception on YGC call fails.
generate GC system -  response capture 4 attributes.
GC card number, and usage pin.(storage)
URL and URL Pin. (send to customer in Email)

{
    "status": "success",
    "transaction_id": "519895fc-83ef-4c6b-a82b-ce9e07f8b498",
    "order_id": 973,
    "reference_id": "YYEMBDS82-372NFOAJ22-89802133",
    "amount": 2000,
    "currency": "AED",
    "brand_code": "APPLE",
    "voucher_details": [
        {
            "label": "Code",
            "type": "redemption_code",
            "value": 5895862487167246
        },
        {
            "label": "Pack Code",
            "type": "pack_code",
            "value": 7862736747382912
        },
        {
            "label": "Pin",
            "type": "pin",
            "value": 3888
        }
    ],
    "expiry_date": "31/08/2024",
    "detail_url": {
        "url": "http://xxxxxx.co/qwxxtcIt/",
        "verification_pin": 7839
    },
    "order_status": "ordered",
    "voucher_status": "active"
}





New Node - TGC
new Item - 


<Item ItemID="1015DL011B" OrganizationCode="TITAN_US" UnitOfMeasure="EACH"/>


1015DL01EGC
<?xml version="1.0" encoding="UTF-8"?>
<ItemList LastItemKey="" LastRecordSet="" TotalItemList="" TotalNumberOfRecords="">
    <Item CanUseAsServiceTool="N" GlobalItemID="" IsItemSuperseded="N" ItemGroupCode="PROD" ItemID="1015DL01EGC" ItemKey="" OrganizationCode="TITAN_US" UnitOfMeasure="EACH">
        <PrimaryInformation AllowGiftWrap="Y" AssumeInfiniteInventory="N" BundleFulfillmentMode="01" BundlePricingStrategy="PARENT" CapacityPerOrderedQty="0.00" CapacityQuantityStrategy="" ComputedUnitCost="0.00" CostCurrency="" CountryOfOrigin="" CreditWOReceipt="N" DefaultProductClass="FQ" Description="1015DL01NEBULA" DisplayItemDescription="1015DL01NEBULA" ExtendedDescription="" ExtendedDisplayDescription="1015DL01NEBULA (1015DL01)" FixedCapacityQtyPerLine="0.00" FixedPricingQtyPerLine="0.00" ImageID="1015DL01" InvoiceBasedOnActuals="N" InvolvesSegmentChange="N" IsAirShippingAllowed="Y" IsDeliveryAllowed="Y" IsEligibleForShippingDiscount="Y" IsFreezerRequired="N" IsHazmat="N" IsParcelShippingAllowed="Y" IsPickupAllowed="Y" IsReturnService="N" IsReturnable="Y" IsShippingAllowed="Y" IsStandaloneService="" IsSubOnOrderAllowed="" IsValid="Y" ItemType="JEWELRY" KitCode="" ManufacturerItem="" ManufacturerItemDesc="Tanishq" ManufacturerName="" MasterCatalogID="" MaxOrderQuantity="0.00" MaxReturnWindow="0" MinOrderQuantity="0.00" MinimumCapacityQuantity="0.00" NumSecondarySerials="0" OrderingQuantityStrategy="ENT" PricingQuantityConvFactor="0.00" PricingQuantityStrategy="" PricingUOM="" PricingUOMStrategy="" PrimaryEnterpriseCode="" PrimarySupplier="" ProductLine="JEWEL" RequiresProdAssociation="N" ReturnWindow="0" RunQuantity="0.00" SerializedFlag="N" ServiceTypeID="" ShortDescription="1015DL01NEBULA" Status="3000" TaxableFlag="Y" UnitCost="0.00" UnitHeight="1.00" UnitHeightUOM="CM" UnitLength="1.00" UnitLengthUOM="CM" UnitVolume="1.00" UnitVolumeUOM="CUCENTIMETER" UnitWeight="0.00" UnitWeightUOM="GRAM" UnitWidth="1.00" UnitWidthUOM="CM"/>
        <InventoryParameters ATPRule="ATP" AdvanceNotificationTime="0" DefaultExpirationDays="0" InventoryMonitorRule="TITAN_US_JEW" IsFifoTracked="N" IsItemBasedAllocationAllowed="N" IsSerialTracked="N" LeadTime="0" MaximumNotificationTime="0.00" MinNotificationTime="0" NodeLevelInventoryMonitorRule="TITAN_US_JEW" ProcessingTime="0" RequiresDGOverride="Y" TagControlFlag="N" TagReqAtReceipt="" TagReqAtShipment="" TimeSensitive="N" UseUnplannedInventory="N"/>
        <ClassificationCodes CommodityCode="" ECCNNo="" HarmonizedCode="" HazmatClass="" NAICSCode="" NMFCClass="" NMFCCode="" OperationalConfigurationComplete="N" PickingType="" PostingClassification="NE" Schedule_B_Code="" StorageType="" TaxProductCode="" UNSPSC="" VelocityCode=""/>
        <Extn ExtnBrandCode="TQ" ExtnComplexityCode="NA" ExtnDiamondCaratage="0.00" ExtnDiamondClarity="NA" ExtnDiamondColor="NA" ExtnDiamondWeight="0.00" ExtnDomesticRef="1015DL01EGC" ExtnGender="NA" ExtnIsDelicateCode="N" ExtnIsFOCIItem="N" ExtnIsMiaPreOrder="N" ExtnItemCode="1015DL01" ExtnKaratage="18" ExtnLotNo="EGC" ExtnNetWeight="0.00" ExtnParentReference="1015DL01" ExtnPricingGroupType="UCP" ExtnProductCode="X" ExtnStdNetWeight="0.00" ExtnStoneWeight="0.00"/>
    </Item>
</ItemList>



<IBD_FindInventory>
    <Promise OnlineStoreID="20152">
        <ShipToAddress Country="US" ZipCode="75056-5254"/>
        <PromiseLines>
            <PromiseLine Engraving="N" ItemID="1015DL01EGC"
                LineId="1" ProductType="JEWELLERY" RequiredQty="1"/>
        </PromiseLines>
    </Promise>
</IBD_FindInventory>


TITAN_US                	1015DL01EGC                             	1015DL01	EGC	NE	X

<MultiApi> 
	<API FlowName="IBD_UpdateInventory">
		<Input>
			<InventorySnapShot InventoryFeedType="0" OrganizationCode="TITAN_US">
				<ShipNode ShipNode="TGC">
					<Item ItemID="1015DL01" LotNumber="EGC" CFAProductCode="NE" ProductCode="X">
						<SupplyDetails Quantity="9999999"/>
					</Item>
				</ShipNode>
			</InventorySnapShot>
		</Input>
	</API>
</MultiApi>


Order - 
Shipment - no payload to POS, to queue

1015DL01EGC 
USA0116159

<Shipment EnterpriseCode="TITAN_US"
    OrderHeaderKey="2025120207334858812567" OrderNo="USA0116159"
    ShipNode="TGC" ShipmentKey="2025120208023058813894" ShipmentNo="100008849">
    <ShipmentLines>
        <ShipmentLine ShipmentLineKey="">
            <OrderLine>
                <CustomAttributes Text7=""/>
            </OrderLine>
        </ShipmentLine>
    </ShipmentLines>
</Shipment>

downloaded at POS bypass.

define qlocal (OMS.EGC.ACCEPTED.IN)

Order Accepted.
IBD_AcceptedEGC
<!--Order Accepted-->
<API FlowName="IBD_ReceiveStoreStatusUpdates">
	<Input>
		<Shipment ShipNode="TGC" ShipmentNo="100008849" StatusCode="2" OrderNo="USA0116159" SellerOrganizationCode="TITAN_US"/>
	</Input>
</API>

define qlocal (OMS.EGC.PACKED.IN)
Packed, and no AWB
IBD_PackEGC
<!--Pack Update: ERP System Send to OMS-->
<API FlowName="IBD_ReceiveStoreStatusUpdates">
	<Input>
		<Shipment ShipNode="XNJ" ShipmentNo="100008660" StatusCode="4" OrderNo="US00115560" SellerOrganizationCode="TITAN_US"/>
	</Input>
</API>

define qlocal (OMS.EGC.INVOICED.IN)
invoiced


define qlocal (OMS.EGC.DELIVERED.EMAIL.OUT)

define qlocal (OMS.EGC.DELIVERED.SMS.OUT)






1. sent order details to Oracle- on response store the Oracle Invoice number in OMS.
2. On Delivered status - send email to customer Campaign ID To get from SFMC.
3. API to check the gift card purchased for the day (limit $1000 per customer per day).
POS calls OMS when creating gift card at store.
SF calls OMS and POS when creating gift card online.



###################################################################################################################################
###################################################################################################################################
###################################################################################################################################



Gift card Redemption, OMS estimates:
 
1. Order create - 2days
2. Order cancellation - Kount hold - 2 days (only  kount cancel) (dependent on MS)
 customer cancel +1 day, store cancellation +1 days.
3. Paylod to ERP changes - 2 days
4. Order processing & invoice - 1 days.
5. Returns - refund - 3 days (dependent on MS)
6. Return Payload changes - 2 days.
 
Total approx estimation - 2 weeks

