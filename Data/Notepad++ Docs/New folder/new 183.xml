curl --location --request POST 'https://gcp.yp.sandbox.yougotagift.com/api/organizations/xxxx/issuance/v1-1/orders/' \
--header 'Authorization: Bearer {{token}}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "brand_code": "APPLE",
    "amount": "2000",
    "currency": "SAR",
    "reference_id": "YYEMBDS82-372NFOAJ22-89802133",
    "language": "en",
    "fulfill_order": true,
    "receiver_email": "Melba0@yahoo.com",
    "receiver_phone": "+919999999999",
    "receiver_name": "Fredrick Bruen",
    "sender_name": "Mario Marks",
    "sender_email": "Cordelia47@hotmail.com",
    "sender_phone": "+919999999999",
    "message": "Agnosco deleo anser viriliter demergo adhaero accommodo sulum. Dicta ab quod ademptio vetus maiores clam. Tabgo adiuvo degero appono.",
}'

<Order
     brand_code="TTDGCUSA"
     amount="2000"
     currency="USD"
     reference_id="YYEMBDS82-372NFOAJ22-89802133"
     language="en"
     fulfill_order="false"
     sender_name="Tanishq USA"
     sender_email="abinayav@titan.co.in"
     sender_phone="+919999999999"></Order>
 



https://ibd-jewellery-sterling-eapi-sit-sfy2o6.1zj8l2.sgp-s1.cloudhub.io/api/v1/orderCreate%27
e64d7781c603476d991d5140cfddd584
d080e3E269b94B03b440F2479602F98E




<?xml version="1.0" encoding="UTF-8"?>
<response amount="1000" brand_code="TTDGCUSA" currency="USD" expiry_date="29/12/2030" order_id="2097572" order_status="ordered" reference_id="2025121102022758939298" status="success" transaction_id="e536d219-e385-4f47-acc2-e240a3598725" url="https://gcp.yp.sandbox.yougotagift.com/en/vouchers/cGJrZGYyX3NoYTI1NiQzOTAwMDAkZ2lmdF9jYXJkX3Byb2Nlc3Nvci5zaWduaW5nJEJYM3RFTVlCTzc0ZjBMREJObWZyT0p2UWQ5M1hTaDdhVmdCbmdxWTZUZ0k9/MjE2NDgxNA:1vaB2u:j8bKck9TOsKdFx2gRFmeDw6Q0DhqI3PIzqxcXqfel-8/detail/" verification_pin="7108" voucher_status="active">
    <VoucherDetail>
        <voucher_detail label="Code" type="redemption_code" value="5892232110624980"/>
        <voucher_detail label="Pin" type="pin" value="2421"/>
        <voucher_detail label="Pack code" type="pack_code" value="null"/>
    </VoucherDetail>
    <OrderInvoiceList>
        <OrderInvoice ActualFreightCharge="0.00" AmountCollected="0.00" ChargeTransactionKey=" " ChargedActualFreight="N" CollectedExternally=" " CollectedThroughAR="0.00" Currency="USD" DateInvoiced="2025-12-11T08:24:24-05:00" HeaderTax="0.00" InvoiceNo="3817" InvoiceType="SHIPMENT" LineSubTotal="7166.00" MasterInvoiceNo=" " OrderHeaderKey="2025121102022758939297" OrderInvoiceKey="202512110861242458947798" OrderNo="US00116358" OtherCharges="0.00" Reference1=" " ReturnReleaseKey=" " ShipmentKey="2025121102422058940550" ShipmentNo="100008854" Status="00" TotalAmount="7757.20" TotalTax="591.20">
            <TaxBreakupList TotalNumberOfRecords="4">
                <TaxBreakup ChargeCategory="Shipping" ChargeName="Shipping" HeaderKey="202512110861242458947798" InvoicedTax="0.00" LineKey="202512110844242458947799" RecordType="INV" Reference1="0" Reference2="" Reference3="" Tax="0.00" TaxBreakupKey="2025121108242458947801" TaxName="Shipping Tax" TaxPercentage="8.25" TaxableFlag="N"/>
                <TaxBreakup ChargeCategory="SalesTaxBreakup" ChargeName="SalesTaxBreakup" HeaderKey="202512110861242458947798" InvoicedTax="0.00" LineKey="202512110844242458947799" RecordType="INV" Reference1="143.32" Reference2="" Reference3="" Tax="143.32" TaxBreakupKey="2025121108242458947802" TaxName="City Tax" TaxPercentage="2.00" TaxableFlag="N"/>
                <TaxBreakup ChargeCategory="SalesTaxBreakup" ChargeName="SalesTaxBreakup" HeaderKey="202512110861242458947798" InvoicedTax="0.00" LineKey="202512110844242458947799" RecordType="INV" Reference1="447.88" Reference2="" Reference3="" Tax="447.88" TaxBreakupKey="2025121108242458947803" TaxName="State Tax" TaxPercentage="6.25" TaxableFlag="N"/>
                <TaxBreakup ChargeCategory="Price" ChargeName="Price" HeaderKey="202512110861242458947798" InvoicedTax="0.00" LineKey="202512110844242458947799" RecordType="INV" Reference1="591.2" Reference2="" Reference3="" Tax="591.20" TaxBreakupKey="2025121108242458947804" TaxName="Sales Tax" TaxPercentage="8.25" TaxableFlag="N"/>
            </TaxBreakupList>
            <LineDetails TotalNumberOfRecords="1">
                <LineDetail Charges="0.00" ExtendedPrice="7166.00" ItemID="UL2617BBQHAA041BL000002" LineTotal="1000" OrderInvoiceDetailKey="202512110844242458947799" OrderInvoiceKey="202512110861242458947798" OrderLineKey="2025121102022758939298" PrimeLineNo="1" ProductClass="FQ" ShippedQty="1.00" SubLineNo="1" Tax="591.20" UnitOfMeasure="EACH" UnitPrice="1000">
                    <LineChargeList TotalNumberOfRecords="1">
                        <LineCharge ChargeAmount="377.14" ChargeCategory="ERPDiscount" ChargeName="OmniPOSSDiscount" ChargePerLine="0.00" ChargePerUnit="377.14" HeaderKey="202512110861242458947798" InvoicedChargePerLine="0.00" InvoicedExtendedCharge="0.00" LineChargesKey="202512110825242458947800" LineKey="202512110844242458947799" RecordType="INV" Reference=""/>
                    </LineChargeList>
                </LineDetail>
            </LineDetails>
            <HeaderChargeList TotalNumberOfRecords="0"/>
        </OrderInvoice>
    </OrderInvoiceList>
</response>








select * from TITAN_GC_LINEDETAILS where  order_line_key in (
select TRIM(ORDER_LINE_KEY) from yfs_order_line where order_header_key in (
select order_header_key from yfs_order_header where order_no in ('US00116358')));

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output encoding="UTF-8" indent="yes" method="xml"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/">
        <Order>
            <xsl:variable name="vOrderNo" select="string(/response/OrderInvoiceList/OrderInvoice/@OrderNo)"/>
            <xsl:variable name="vorderheaderkey" select="string(/response/OrderInvoiceList/OrderInvoice/@OrderHeaderKey)"/>
            <xsl:variable name="vShipmentNo" select="string(/response/OrderInvoiceList/OrderInvoice/@ShipmentNo)"/>
            
            
            <xsl:variable name="vorderLinekey" select="string(/response/OrderInvoiceList/OrderInvoice/LineDetails/LineDetail/@OrderLineKey)"/>
            <xsl:variable name="vGCNumber" select="string(/response/VoucherDetail/voucher_detail[@label='Code' and @type='redemption_code']/@value)"/>
            <!-- <xsl:variable name="vGCKey" select="string(/response/VoucherDetail/voucher_detail[@label='Pin' and @type='pin']/@value)"/> -->
			
			<xsl:variable name="vGCKey" select="string(/response/VoucherDetail/@verification_pin)"/>
            <xsl:variable name="vExpiry" select="string(/response/@expiry_date)"/>
            
            <xsl:variable name="vGCExpiry" select="string(concat(substring($vExpiry,7,4),'-',substring($vExpiry,4,2),'-',substring($vExpiry,1,2)))"/>
            <xsl:variable name="vamount" select="string(/response/@amount)"/>
            
            
            <xsl:attribute name="EnterpriseCode">
                <xsl:value-of select="'TITAN_US'"/>
            </xsl:attribute>
            <xsl:attribute name="DocumentType">
                <xsl:value-of select="'0001'"/>
            </xsl:attribute>
            <xsl:attribute name="Override">
                <xsl:value-of select="'Y'"/>
            </xsl:attribute>
            <xsl:attribute name="OrderNo">
                <xsl:value-of select="$vOrderNo"/>
            </xsl:attribute>
            <OrderLines>
                <OrderLine>
                    <xsl:attribute name="OrderLineKey">
                        <xsl:value-of select="$vorderLinekey"/>
                    </xsl:attribute>
                    <Extn>
                    <TitanGCLineDetailList>
                    <TitanGCLineDetail>
                    <xsl:attribute name="OrderLineKey">
                        <xsl:value-of select="$vorderLinekey"/>
                    </xsl:attribute>
                    <xsl:attribute name="ShipmentNo">
                        <xsl:value-of select="$vShipmentNo"/>
                    </xsl:attribute>
                    <xsl:attribute name="OrderNo">
                        <xsl:value-of select="$vOrderNo"/>
                    </xsl:attribute>
                    
                        <xsl:attribute name="GiftCardPin">
                            <xsl:value-of select="$vGCKey"/>
                        </xsl:attribute>
                        <xsl:attribute name="GiftCardNo">
                            <xsl:value-of select="$vGCNumber"/>
                        </xsl:attribute>
                        <xsl:attribute name="CardExpiry">
                            <xsl:value-of select="$vGCExpiry"/>
                        </xsl:attribute>
                        <xsl:attribute name="Amount">
                            <xsl:value-of select="$vamount"/>
                        </xsl:attribute>
                        </TitanGCLineDetail>
                        </TitanGCLineDetailList>
                    </Extn>
                </OrderLine>
            </OrderLines>
        </Order>
    </xsl:template>
</xsl:stylesheet>






###################################################################################################################################
###################################################################################################################################


<?xml version="1.0" encoding="UTF-8"?>
<response amount="1000" brand_code="TTDGCUSA" currency="USD" expiry_date="29/12/2030" order_id="2097572" order_status="ordered" reference_id="2025121102022758939298" status="success" transaction_id="e536d219-e385-4f47-acc2-e240a3598725" url="https://gcp.yp.sandbox.yougotagift.com/en/vouchers/cGJrZGYyX3NoYTI1NiQzOTAwMDAkZ2lmdF9jYXJkX3Byb2Nlc3Nvci5zaWduaW5nJEJYM3RFTVlCTzc0ZjBMREJObWZyT0p2UWQ5M1hTaDdhVmdCbmdxWTZUZ0k9/MjE2NDgxNA:1vaB2u:j8bKck9TOsKdFx2gRFmeDw6Q0DhqI3PIzqxcXqfel-8/detail/" verification_pin="7108" voucher_status="active">
    <VoucherDetail>
        <voucher_detail label="Code" type="redemption_code" value="5892232110624980"/>
        <voucher_detail label="Pin" type="pin" value="2421"/>
        <voucher_detail label="Pack code" type="pack_code" value="null"/>
    </VoucherDetail>




<OrderList LastOrderHeaderKey="2025121102022758939297" LastRecordSet="Y" ReadFromHistory="" TotalOrderList="1">
    <Order DocumentType="0001" EnterpriseCode="TITAN_US" OrderHeaderKey="2025121102022758939297" OrderNo="US00116358" SellerOrganizationCode="TITAN_US">
        <OrderLines>
            <OrderLine OrderLineKey="2025121102022758939298">
                <Extn ExtnAmountUS="0.00" ExtnBrand="Tanishq" ExtnCFAProdCode="86" ExtnCityTaxUS="0.00" ExtnConversionRate="1.15" ExtnCountryTaxUS="0.00" ExtnCountyTaxUS="0.00" ExtnCustomDutyTaxUS="0.00" ExtnDeclaredValue="7543.00" ExtnDiamondCaratage="0.73" ExtnDiamondClarity="VS" ExtnDiamondColor="GH" ExtnDiamondWeight="0.00" ExtnDiscountEligibleForEncircle="N" ExtnERPDiscountValueUS="0.00" ExtnGoldRate14KT="88.55" ExtnGoldRate14KTUS="0.00" ExtnGoldRate18KT="113.27" ExtnGoldRate18KTUS="0.00" ExtnGoldRate21KT="0.00" ExtnGoldRate21KTUS="0.00" ExtnGoldRate22KT="136.00" ExtnGoldRate22KTUS="0.00" ExtnGoldRate24KT="148.36" ExtnGoldRate24KTUS="0.00" ExtnGoldRateUS="0.00" ExtnGoldValueUS="0.00" ExtnGrossWeight="31.667" ExtnImageURL="https://www.tanishq.ae/dw/image/v2/BJGM_PRD/on/demandware.static/-/Sites-Tanishq-site-catalog/default/dwfba6b370/images/hi-res/UL2617BBQAA04_1.jpg" ExtnIsEngraveReq="N" ExtnIsPickupFromStore="N" ExtnIsPreOrderItem="N" ExtnIsPriorityDelivery="N" ExtnItemCode="UL2617BBQHAA04" ExtnLOB="JEWELLERY" ExtnLotNo="1BL000002" ExtnMakingCharges="0.00" ExtnMakingChargesPerGram="0.00" ExtnMakingChargesPerGramUS="0.00" ExtnMakingChargesPerUnit="0.00" ExtnMakingChargesPerUnitUS="0.00" ExtnMakingChargesPercent="0.00" ExtnMakingChargesPercentage="0.00" ExtnMakingChargesStudded="1524.00" ExtnMakingChargesValueUS="0.00" ExtnMetalKaratage="18.00" ExtnMetalRate="113.27" ExtnMetalValue="3570.38" ExtnNetMetalWeight="31.521" ExtnProductURL="https://dev2.tanishq.com/product/charismatic-brilliance-diamond-bracelet-ul2617bbqhaa041bl000002.html" ExtnSalesTax="0.00" ExtnSellerLineNo="1" ExtnShippingCityTaxUS="0.00" ExtnShippingCountryTaxUS="0.00" ExtnShippingCountyTaxUS="0.00" ExtnShippingSpecialTaxUS="0.00" ExtnShippingStateTaxUS="0.00" ExtnSpecialTaxUS="0.00" ExtnStateTaxUS="0.00" ExtnStoneTypeCode="DIAMOND" ExtnStoneValue="1922.23" ExtnStoneValueUS="0.00" ExtnTariffAmount="526.25" ExtnTariffAmountUS="0.00" ExtnTariffPercentage="7.50" ExtnTotalShippingChargeUS="0.00" ExtnTotalShippingTaxUS="0.00" ExtnTotalTaxUS="0.00" ExtnWastageCharges="0.00" ExtnWastagePercentage="0.00" ExtnWebBrandCode="Tanishq">
                    <TitanPaymentDetailList>
                        <TitanPaymentDetail AmountPerLine="0.00" AmountPerUnit="7757.20" Createprogid="SFCCCreateOrderMsgIntegServer" Createts="2025-12-11T02:02:37-05:00" Createuserid="SFCCCreateOrderMsgIntegServer" EncirclePointsPerLine="0.00" EncirclePointsPerUnit="0.00" ExtnPaymentKey="" GCKey="" GCNumber="" GiftCardType="" Lockid="0" Modifyprogid="SFCCCreateOrderMsgIntegServer" Modifyts="2025-12-11T02:02:37-05:00" Modifyuserid="SFCCCreateOrderMsgIntegServer" OrderLineKey="2025121102022758939298" PaymentDetailKey="2025121102022758939314" PaymentGateway="" PaymentKeyReference="" PaymentType="JPMorganPay" TransactionReference="" TransactionTimestamp="2025-12-11T00:56:41-05:00" isHistory="N"/>
                    </TitanPaymentDetailList>
                </Extn>
            </OrderLine>
        </OrderLines>
    </Order>
</OrderList>
</response>


<OrderList>
<Order DocumentType="0001" EnterpriseCode="TITAN_US" OrderHeaderKey="2025121102022758939297" OrderNo="US00116358" SellerOrganizationCode="TITAN_US" >
<OrderLines>
      <OrderLine OrderLineKey="2025121102022758939298">
         <Extn>
            <TitanPaymentDetailList>
               <TitanPaymentDetail />
            </TitanPaymentDetailList>
         </Extn>
      </OrderLine>
</OrderLines>
</Order>
</OrderList>

<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output encoding="UTF-8" indent="yes" method="xml"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/">
        <Order>
            <xsl:variable name="vOrderNo" select="string(/response/OrderList/Order/@OrderNo)"/>
            <xsl:variable name="vorderheaderkey" select="string(/response/OrderList/Order/@OrderNo)"/>
            <xsl:variable name="vOrderLineKey" select="string(/response/OrderList/Order/OrderLines/OrderLine/@OrderLineKey)"/>
            <xsl:variable name="vPaymentDetailKey" select="string(/response/OrderList/Order/OrderLines/OrderLine[@OrderLineKey=$vOrderLineKey]/Extn/TitanPaymentDetailList/TitanPaymentDetail[@OrderLineKey=$vOrderLineKey]/@PaymentDetailKey)"/>
            
            <xsl:variable name="vGCNumber" select="string(/response/VoucherDetail/voucher_detail[@label='Code' and @type='redemption_code']/@value)"/>
            <xsl:variable name="vGCKey" select="string(/response/VoucherDetail/voucher_detail[@label='Pin' and @type='pin']/@value)"/>
            
            
            <xsl:attribute name="EnterpriseCode">
                <xsl:value-of select="'TITAN_US'"/>
            </xsl:attribute>
            <xsl:attribute name="DocumentType">
                <xsl:value-of select="'0001'"/>
            </xsl:attribute>
            <xsl:attribute name="Override">
                <xsl:value-of select="'Y'"/>
            </xsl:attribute>
            <xsl:attribute name="OrderNo">
                <xsl:value-of select="$vOrderNo"/>
            </xsl:attribute>
            <OrderLines>
                <OrderLine>
                    <xsl:attribute name="OrderLineKey">
                        <xsl:value-of select="$vOrderLineKey"/>
                    </xsl:attribute>
                    <Extn>
                    <TitanPaymentDetailList>
                    <TitanPaymentDetail>
                    <xsl:attribute name="PaymentDetailKey">
                        <xsl:value-of select="$vPaymentDetailKey"/>
                    </xsl:attribute>
                    <xsl:attribute name="OrderLineKey">
                        <xsl:value-of select="$vOrderLineKey"/>
                    </xsl:attribute>
                        <xsl:attribute name="GCKey">
                            <xsl:value-of select="$vGCKey"/>
                        </xsl:attribute>
                        <xsl:attribute name="GCNumber">
                            <xsl:value-of select="$vGCNumber"/>
                        </xsl:attribute>
                        <xsl:attribute name="GCNumber">
                            <xsl:value-of select="$vGCNumber"/>
                        </xsl:attribute>
                        </TitanPaymentDetail>
                        </TitanPaymentDetailList>
                    </Extn>
                </OrderLine>
            </OrderLines>
        </Order>
    </xsl:template>
</xsl:stylesheet>





<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output encoding="UTF-8" indent="yes" method="xml"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/">
        <Order>
            <xsl:variable name="vOrderNo" select="string(/response/OrderInvoiceList/OrderInvoice/@OrderNo)"/>
            <xsl:variable name="vorderheaderkey" select="string(/response/OrderInvoiceList/OrderInvoice/@OrderNo)"/>
            <xsl:variable name="vorderLinekey" select="string(/response/OrderInvoiceList/OrderInvoice/LineDetails/LineDetail/@OrderLineKey)"/>
            <xsl:variable name="vGCNumber" select="string(/response/VoucherDetail/voucher_detail[@label='Code' and @type='redemption_code']/@value)"/>
            <xsl:variable name="vGCKey" select="string(/response/VoucherDetail/voucher_detail[@label='Pin' and @type='pin']/@value)"/>
            
            
            <xsl:attribute name="EnterpriseCode">
                <xsl:value-of select="'TITAN_US'"/>
            </xsl:attribute>
            <xsl:attribute name="DocumentType">
                <xsl:value-of select="'0001'"/>
            </xsl:attribute>
            <xsl:attribute name="Override">
                <xsl:value-of select="'Y'"/>
            </xsl:attribute>
            <xsl:attribute name="OrderNo">
                <xsl:value-of select="$vOrderNo"/>
            </xsl:attribute>
            <OrderLines>
                <OrderLine>
                    <xsl:attribute name="OrderLineKey">
                        <xsl:value-of select="$vorderLinekey"/>
                    </xsl:attribute>
                    <Extn>
                    <TitanPaymentDetailList>
                    <TitanPaymentDetail>
                    <xsl:attribute name="OrderLineKey">
                        <xsl:value-of select="$vorderLinekey"/>
                    </xsl:attribute>
                        <xsl:attribute name="GCKey">
                            <xsl:value-of select="$vGCKey"/>
                        </xsl:attribute>
                        <xsl:attribute name="GCNumber">
                            <xsl:value-of select="$vGCNumber"/>
                        </xsl:attribute>
                        </TitanPaymentDetail>
                        </TitanPaymentDetailList>
                    </Extn>
                </OrderLine>
            </OrderLines>
        </Order>
    </xsl:template>
</xsl:stylesheet>