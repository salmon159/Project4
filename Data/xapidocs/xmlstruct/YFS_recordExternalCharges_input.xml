<?xml version="1.0" encoding="UTF-8"?>
<!-- 
Licensed Materials - Property of IBM
IBM Sterling Selling And Fulfillment Suite
(C) Copyright IBM Corp. 2005, 2019 All Rights Reserved.
US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
 -->
<RecordExternalCharges AuditTransactionId=""
    CancelPendingAsynchronous="" DocumentType="Conditional"
    EnterpriseCode="Conditional" ModificationReasonCode=""
    ModificationReasonText="" ModificationReference1=""
    ModificationReference2="" ModificationReference3=""
    ModificationReference4="" OrderHeaderKey="Conditional"
    OrderNo="Conditional" ReducePendingAsyncronousAmounts=""
    TransactionId="" xmlns="http://www.sterlingcommerce.com/documentation/YFS/recordExternalCharges/input">
    <yfc:doc>
        <Element>
            <Description>
                <div>
			Pass either the <code>OrderHeaderKey</code> or the <code>EnterpriseCode</code>, <code>DocumentType</code> and <code>OrderNo</code> to identify the order.
			</div>
            </Description>
        </Element>
        <Attributes>
            <Attribute EntityName="Order_Audit"
                Name="AuditTransactionId" NameInEntity="Audit_Transaction_Id"/>
            <Attribute DataType="Flag" Name="CancelPendingAsynchronous">
                <Description>
                    <div>This flag should only be used to record the fact that an asynchronous request's response will not be received. This API expects <code>RequestAmount</code> to be passed as less than 0 to cancel a positive authorization or positive settlement requests. If trying to cancel a asynchronously closed negative transaction, a reverse AUTHORIZATION or refund CHARGE pass <code>RequestAmount</code> as positive. Valid values are 'Y', 'N' or Void. When using this feature, the following attribute values should be passed. <code>ProcessedAmount</code> = 0, <code>RequestProcessed</code>= Y, <code>ReducePendingAsyncronousAmounts</code> = Y.  <code>AuthorizationID</code> and <code>AuthorizationExperationDate</code> of the asynchronous request which will not be received should also be passed.
                   </div>
                </Description>
            </Attribute>
            <Attribute EntityName="Order_Header" Name="DocumentType" NameInEntity="Document_Type"/>
            <Attribute EntityName="Order_Header" Name="EnterpriseCode" NameInEntity="Enterprise_Key"/>
            <Attribute EntityName="Order_Audit"
                Name="ModificationReasonCode" NameInEntity="Reason_Code"/>
            <Attribute EntityName="Order_Audit"
                Name="ModificationReasonText" NameInEntity="Reason_Text"/>
            <Attribute EntityName="Order_Audit"
                Name="ModificationReference1" NameInEntity="Reference_1"/>
            <Attribute EntityName="Order_Audit"
                Name="ModificationReference2" NameInEntity="Reference_2"/>
            <Attribute EntityName="Order_Audit"
                Name="ModificationReference3" NameInEntity="Reference_3"/>
            <Attribute EntityName="Order_Audit"
                Name="ModificationReference4" NameInEntity="Reference_4"/>
            <Attribute EntityName="Order_Header" Name="OrderHeaderKey" NameInEntity="Order_Header_Key"/>
            <Attribute EntityName="Order_Header" Name="OrderNo" NameInEntity="Order_No"/>
            <Attribute DataType="Flag" Name="ReducePendingAsyncronousAmounts">
                <Description>
                    <div>Indicates if external charges are being recorded for an asynchronous request. Valid values are 'Y', 'N' or Void. Set this flag to "Y" with a valid <code>RequestAmount</code> to indicate that the external charges are being recorded for an asynchronous request. This will enable the system to adjust the pending asynchronous amounts correctly. Set the flag to "N" to indicate that the external charges are being recorded for non-asynchronous request. In this mode, system will not process any pending asynchronous amounts. Set this flag to Void or Do not pass this flag, if unsure the request is asynchronous or not. In this mode system will try to adjust any pending asynchronous amounts that exists for the request. This mode is provided for backward compatibility.
                   </div>
                </Description>
            </Attribute>
            <Attribute DataType="TransactionID" Name="TransactionId"/>
        </Attributes>
    </yfc:doc>
    <PaymentMethod BillToKey="" CashBackAmount="" ChargeSequence=""
        CheckNo="" CheckReference="" CreditCardExpDate=""
        CreditCardName="" CreditCardNo="" CreditCardType=""
        CustomerAccountNo="" CustomerPONo="" DebitCardNo=""
        DisplayCreditCardNo="" DisplayCustomerAccountNo=""
        DisplayDebitCardNo="" DisplayPaymentReference1=""
        DisplaySvcNo="" EntryType="" FirstName="" LastName=""
        MaxChargeLimit="" MiddleName="" PaymentKey="Conditional"
        PaymentReference1="" PaymentReference2="" PaymentReference3=""
        PaymentReference4="" PaymentReference5="" PaymentReference6=""
        PaymentReference7="" PaymentReference8="" PaymentReference9=""
        PaymentType="Required" PlannedRefundAmount="" ReasonCode=""
        SuspendAnyMoreCharges="" SuspendExpiredAuthReversal="" SvcNo=""
        UnlimitedCharges="" yfc:DTDOccurrence="ZeroOrMany">
        <yfc:includeInParent IncludeXMLChildNodes="Y"
            IncludeXMLFileName="MasterPaymentMethod.xml" IncludeXMLPath="/PaymentRelated/InputForManage/PaymentMethodRecordExternalCharges"/>
        <yfc:includeInParent IncludeXMLChildNodes="Y"
            IncludeXMLFileName="MasterPaymentMethod.xml" IncludeXMLPath="/PaymentRelated/InputForManage/PaymentMethodCommon"/>
        <yfc:doc>
            <Element EntityName="Payment">
                <Description>
                    <div>
				If the <code>PaymentMethod</code> is not indicated on an order, the default <code>PaymentMethod</code> is added to the order. Pass the <code>PaymentKey</code>to record the charge or authorization against an existing payment method.
				</div>
                </Description>
            </Element>
            <Attributes>
                <Attribute EntityName="Payment" Name="ChargeSequence" NameInEntity="charge_sequence">
                    <Description>
                        <div>
								Used to identify the order to which charges are applied.
								<br/>
								The Seller Organization can configure the payment types so that
								they are charged and refunded in a particular sequence. The
								charge sequence and refund sequence are independent of each
								other. A
								<code>PaymentType</code>
								with a
								<code>ChargeSequence</code>
								set to
								<b>
                                <code>0</code>
                            </b>
								is charged before another
								<code>PaymentType</code>
								with
								<code>ChargeSequence</code>
								set to
								<b>
                                <code>1</code>
                            </b>
								.
								<br/>
								The Buyer can also specify the
								<code>ChargeSequence</code>
								of the
								<code>PaymentMethod</code>
								in the
								<code>createOrder</code>
								input xml. If a charge sequence is not specified by the Buyer,
								the Seller's
								<code>ChargeSequence</code>
								is followed.
								<br/>
                            <br/>
								If both the Buyer and the Seller supply
								<code>ChargeSequence</code>
								, charges are made in the order
								that the Seller specifies, but
								within a particular charge type, such
								as CreditCard, the Buyer's
								sequence is honored.
								<br/>
                            <br/>
								For example:
								<br/>
								A seller specifies the
								<code>ChargeSequence</code>
								as 0 for CUSTOMER_ACCOUNT, 1 for CREDIT_CARD, 2 for OTHER.
								<br/>
								A buyer specifies the
								<code>ChargeSequence</code>
								as 1 for MyBank-CreditCard, 2 for CUSTOMER_ACCOUNT, and 3 for
								MyOther-CreditCard.
								<br/>
								The payment methods are charged in the following sequence:
								<br/>
								CUSTOMER_ACCOUNT, MyBank-CreditCard, MyOther-CreditCard.
								<br/>
								The Customer account is charged because that is the seller's
								preferred method, and the two credit cards are charged based on
								the order that the buyer specified.
							</div>
                    </Description>
                </Attribute>
                <Attribute DataType="Text-100" Name="EntryType">
                    <Description>
                        <div>The Entry Type used to enter payment information into the
								system.</div>
                    </Description>
                </Attribute>
                <Attribute EntityName="Payment" Name="PaymentType" NameInEntity="Payment_Type">
                    <Description>
                        <div>
								Type of payment.
								<br/>
								The
								<code>PaymentType</code>
								must be a value that is already configured for the Seller
								Organization.
								<br/>
								If a
								<code>PaymentMethod</code>
								element is passed, the
								<code>PaymentType</code>
								is validated, even if payment processing is not required for the
								order.
								<Validation>
                                <Condition>Must be a value defined for the Seller Organization.
					</Condition>
                                <Error
                                    Description="Payment Type not set up for seller." ErrorCode="YFS10491"/>
                            </Validation>
                            <Validation>
                                <Condition>
                                    <code>PaymentType</code>
										must be passed.
									</Condition>
                                <Error
                                    Description="Mandatory Parameters for the Operation are missing." ErrorCode="YFS10364"/>
                            </Validation>
                        </div>
                    </Description>
                </Attribute>
            </Attributes>
        </yfc:doc>
        <PaymentDetailsList>
            <yfc:includeInParent IncludeXMLChildNodes="N"
                IncludeXMLFileName="MasterPaymentMethod.xml" IncludeXMLPath="/PaymentRelated/RecordExternalChargesInput/PaymentDetailsList"/>
            <PaymentDetails AsyncRequestIdentifier=""
                AuditTransactionId="" AuthAvs="" AuthCode=""
                AuthReturnCode="" AuthReturnFlag="" AuthReturnMessage=""
                AuthTime="" AuthorizationExpirationDate=""
                AuthorizationID="" CVVAuthCode=""
                CallForAuthorizationStatus="" CashBackAmount=""
                ChargeType="Required" CollectionDate=""
                HoldAgainstBook="" InPerson="" InternalReturnCode=""
                InternalReturnFlag="" InternalReturnMessage=""
                OfflineStatus="" PaymentEntryType="" ProcessedAmount=""
                ReasonCode="" Reference1="" Reference2=""
                RequestAmount="" RequestId="" RequestProcessed=""
                TranRequestTime="" TranReturnCode="" TranReturnFlag=""
                TranReturnMessage="" TranType="" VoidTransaction="" yfc:DTDOccurrence="OneOrMany">
                <yfc:includeInParent IncludeXMLChildNodes="N"
                    IncludeXMLFileName="MasterPaymentMethod.xml" IncludeXMLPath="/PaymentRelated/RecordExternalChargesInput/PaymentDetailsList/PaymentDetails"/>
                <yfc:doc>
                    <Element EntityName="Credit_Card_Transaction">
                        <Description>
                            <p>
								If the
								<code>PaymentMethod</code>
								element is passed,
								<code>PaymentDetails</code>
								is required.
							</p>
                            <p>
								This element cannot be passed for orders with
								<code>pending changes</code>
								.
							</p>
                        </Description>
                    </Element>
                    <Attributes>
                        <Attribute DataType="Text-255" Name="AsyncRequestIdentifier">
                            <Description>
                                <div>This field is used as an Identifier for recording a response for transaction closed as asynchronous. Pass <code>AsyncRequestIdentifier</code> only when <code>ReducePendingAsyncronousAmounts</code> flag is set to "Y". <code>AsyncRequestIdentifier</code> will be ignored if <code>ReducePendingAsyncronousAmounts</code> flag is passed as "N". 
  				Use <code>AsyncRequestIdentifier</code> as an identifier to record the response of a asynchronous transaction only once. AsyncRequestIdentifier can be associated to a asynchronously closed transaction in the user exit.
  				</div>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="AuditTransactionId" NameInEntity="Audit_Transaction_Id">
                            <Description>
                                <p> AuditTransactionID is a user defined data. This data will be stored on YFS_ORDER_AUDIT table. Also in case of APIs that cause the creation of a CHARGE_REQUEST, the same field will be stored on YFS_CHARGE_TRANSACTION table. </p>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="AuthorizationExpirationDate" NameInEntity="Authorization_Expiration_Date"/>
                        <Attribute EntityName="Charge_Transaction"
                            Name="AuthorizationID" NameInEntity="Authorization_Id"/>
                        <Attribute EntityName="Charge_Transaction"
                            Name="CallForAuthorizationStatus" NameInEntity="Call_For_Auth"/>
                        <Attribute EntityName="Charge_Transaction"
                            Name="CashBackAmount" NameInEntity="Cash_Back_Amount"/>
                        <Attribute EntityName="Charge_Transaction"
                            Name="ChargeType" NameInEntity="Charge_Type">
                            <Description>
                                <p> The type of charge that is being applied to the order. <br/>Valid Values: <b>
                                    <code>AUTHORIZATION</code>
                                    </b> or <b>
                                    <code>CHARGE</code>
                                    </b>. <Validation>
                                    <Condition> Invalid value is passed. </Condition>
                                    <Error
                                    Description="YFS:Invalid Transaction Type." ErrorCode="YFS10156"/>
                                    </Validation>
                                </p>
                            </Description>
                        </Attribute>
                        <Attribute DataType="TimeStamp"
                            EntityName="Charge_Transaction"
                            Name="CollectionDate" NameInEntity="Collection_Date">
                            <Description>
                                <p> The date and time when the charge is realized.It can be future date.When this date is passed in input xml, <code>Is_Collection_Date_Firm </code>flag is set to Y. </p>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="HoldAgainstBook" NameInEntity="Hold_Against_Book">
                            <Description>
                                <p> This flag indicates whether or not pre-authorized or pre-charged amounts for the entire order will be held until the order is completely invoiced. If passed as 'Y', they will be. If passed as 'N', or not passed, the extra charge or authorization amount is not held. For example, if there are two units of $5 each on an pre-paid order, and $10 are collected up front, then when <code>HoldAgainstBook</code> is passed as 'N', a refund for $5 is created upon invoicing of the first unit. When passed as 'Y', no refund is created. If the pre-charged amount is $12 for the order, and when <code>HoldAgainstBook</code> is passed as 'N', a refund is created for $7 upon invoicing of the first unit, and for $2 when <code>HoldAgainstBook</code> is passed as 'Y'. </p>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="InPerson" NameInEntity="In_Person">
                            <Description>
                                <p>This flag indicates that the transaction represents an in person, or card in hand, transaction. A transaction that is in person will distribute against in person order totals and invoices, and vice versa.</p>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="OfflineStatus" NameInEntity="Offline_Status">
                            <Description>
                                <p>This flag indicates the transaction attempted to reach the payment gateway but was unable to contact it. This should only be passed for unprocessed records, as this may be updated to N by the user exit, and will be reset to null when the record moves to CLOSED status. </p>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="PaymentEntryType" NameInEntity="Payment_Entry_Type">
                            <Description>
                                <p>The <code>EntryType</code> used to enter payment information into the system, such as by a magnetic card reader. If passed, this attribute will take precedence over other attributes for the entry type of the transaction.</p>
                            </Description>
                        </Attribute>
                        <Attribute DataType="ExternalAmount" Name="ProcessedAmount">
                            <Description>
                                <p> If  <code>ProcessedAmount</code> is passed as a value greater than zero, the <code>STATUS</code> in the  <code>CHARGE_TRANSACTION</code> table is set to <b>
                                    <code>CLOSED</code>
                                    </b>. <br/>If <code>ProcessedAmount</code> is passed as zero or not passed, the <code>STATUS</code> will be set to <code>OPEN</code>, unless <code>RequestProcessed</code> is passed as <code>Y</code>. The <code>ProcessedAmount</code> is used to update  <code>CHARGE_TRANSACTION</code> table, depending on the charge type.  If the <code>ChargeType</code> value is :<br/>
                                    <b>
                                    <code>AUTHORIZATION</code>
                                    </b> - the <code>OpenAuthorizedAmount</code> is updated with the <code>ProcessedAmount</code>. <br/>
                                    <b>
                                    <code>CHARGE</code>
                                    </b> - the <code>CreditAmount</code> is updated with the <code>ProcessedAmount</code>. </p>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="ReasonCode" NameInEntity="Reason_Code">
                            <Description>
                                <p>This field can be used to store reason code for transaction update.</p>
                            </Description>
                        </Attribute>
                        <Attribute DataType="ExternalAmount"
                            EntityName="Charge_Transaction"
                            Name="RequestAmount" NameInEntity="Request_Amount">
                            <Description>
                                <p> For ChargeTypes <code>CHARGE</code> and <code>AUTHORIZATION</code>, this field holds the amount that is requested for charging/authorization. If <code>RequestAmount</code> is passed, it is set as the <code>RequestAmount</code> of the <code>chargetransaction</code> record and the <code>TranAmount</code> of the <code>creditcardtransaction</code> record. </p>
                            </Description>
                        </Attribute>
                        <Attribute DataType="Flag" Name="RequestProcessed">
                            <Description>
                                <p> If the value of this is <b>
                                    <code>Y</code>
                                    </b>, the payment details record will be treated as already processed. This flag is considered only when <code>ProcessedAmount</code> is <b>
                                    <code>0</code>
                                    </b>. Request with <code>ProcessedAmount</code> greater than or less than <b>
                                    <code>0</code>
                                    </b> is always considered as processed. </p>
                            </Description>
                        </Attribute>
                        <Attribute EntityName="Charge_Transaction"
                            Name="VoidTransaction" NameInEntity="Void_Transaction"/>
                    </Attributes>
                </yfc:doc>
            </PaymentDetails>
        </PaymentDetailsList>
        <PersonInfoBillTo AddressID="" AddressLine1="" AddressLine2=""
            AddressLine3="" AddressLine4="" AddressLine5=""
            AddressLine6="" AlternateEmailID="" Beeper="" City=""
            Company="" Country="" DayFaxNo="" DayPhone="" Department=""
            EMailID="" EveningFaxNo="" EveningPhone="" FirstName=""
            IsAddressVerified="" IsCommercialAddress="" JobTitle=""
            LastName="" Latitude="" Longitude="" MiddleName=""
            MobilePhone="" OtherPhone="" PersonID="" PersonInfoKey=""
            State="" Suffix="" TaxGeoCode="" Title="" ZipCode="">
            <yfc:includeInParent IncludeXMLFileName="MasterOrder.xml" IncludeXMLPath="/Order/PersonInfoShipTo"/>
            <yfc:includeInParent IncludeXMLChildNodes="Y"
                IncludeXMLFileName="MasterPersonInfo.xml" IncludeXMLPath="/PersonInfo"/>
        </PersonInfoBillTo>
    </PaymentMethod>
    <Memo ChargeAmount="" Reference1="">
        <yfc:doc>
            <Element EntityName="Order_Invoice">
                <Description>
                    <div>
				If <code>Memo</code> is passed, an order invoice is created. A <code>chargetransaction</code> record is created with <code>ChargeType</code> set to <b>
                            <code>ADJUSTMENTS</code>
                        </b>.
				</div>
                </Description>
            </Element>
            <Attributes>
                <Attribute DataType="ComputedMoney"
                    EntityName="Order_Invoice" Name="ChargeAmount" NameInEntity="Total_Amount">
                    <Description>
                        <div>
					The invoice's grand total.
					<br/>If value passed is less than <b>
                                <code>0</code>
                            </b>, a credit memo is issued. Otherwise, a debit memo is issued. This value is set as the <code>TotalAmount</code> in the invoice.
					</div>
                    </Description>
                </Attribute>
                <Attribute EntityName="Order_Invoice" Name="Reference1" NameInEntity="Reference_1">
                    <Description>
                        <div>
					If <code>Reference1</code> is passed, it is set as <code>Reference1</code> of the order invoice.
					</div>
                    </Description>
                </Attribute>
            </Attributes>
        </yfc:doc>
    </Memo>
</RecordExternalCharges>
